---
// src/components/home/FAQ.astro
// Carga FAQ desde Sanity con fallback

import Section from '../ui/Section.astro';
import Icon from '../ui/Icon.astro';
import { getFAQ } from '../../lib/sanity/faq.service';

const faqData = await getFAQ();
---

<Section id="faq" background="light">
  <div class="max-w-3xl mx-auto">
    <div class="text-center mb-12 animate-on-scroll fade-up">
      <div class="accent-line mx-auto mb-4"></div>
      <h2 class="heading-section mb-4">{faqData.title}</h2>
      {faqData.subtitle && (
        <p class="text-body">{faqData.subtitle}</p>
      )}
    </div>

    <div class="space-y-4">
      {faqData.items.map((faq, index) => (
        <details class={`group bg-surface-white rounded-xl shadow-sm animate-on-scroll fade-up delay-${(index % 5) + 1}`}>
          <summary class="flex items-center justify-between p-6 cursor-pointer list-none">
            <h3 class="font-semibold text-brand-primary pr-4">{faq.question}</h3>
            <Icon 
              name="chevron" 
              size={20} 
              class="text-text-muted group-open:rotate-180 transition-transform flex-shrink-0" 
            />
          </summary>
          <div class="px-6 pb-6 pt-0">
            <p class="text-body">{faq.answer}</p>
          </div>
        </details>
      ))}
    </div>
  </div>
</Section>
